<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Patient Dashboard | Mini Health</title>
  <link rel="stylesheet" href="../styles/main.css" />
  <link rel="stylesheet" href="../styles/dashboard.css" />
</head>
<body>
  <!-- ðŸŒ NAVBAR -->
  <header class="navbar">
    <div class="logo">ðŸ’š Mini Health</div>
    <nav>
      <a href="../index.html">Home</a>
      <a href="../records.html">My Records</a>
      <a href="../appointments.html">Appointments</a>
      <a href="../prescriptions.html">Prescriptions</a>
      <button id="logoutBtn" class="btn">Logout</button>
    </nav>
  </header>

  <!-- ðŸ©º DASHBOARD CONTENT -->
  <main class="dashboard-content">
    <h1 id="patientName">Welcome, Loading... ðŸ‘‹</h1>
    <p class="subtitle">Your personalized health dashboard â€” manage records, appointments, and prescriptions.</p>

    <section class="cards">
      <div class="card">
        <h3>ðŸ“„ Health Records</h3>
        <p>View and upload lab results, scans, and prescriptions securely.</p>
        <a href="../records.html" class="btn primary">Open</a>
      </div>

      <div class="card">
        <h3>ðŸ“… Appointments</h3>
        <p>Check your upcoming and past doctor visits.</p>
        <a href="../appointments.html" class="btn primary">View</a>
      </div>

      <div class="card">
        <h3>ðŸ’Š Prescriptions</h3>
        <p>Access e-prescriptions shared by your doctor.</p>
        <a href="../prescriptions.html" class="btn primary">See Details</a>
      </div>

      <div class="card">
        <h3>ðŸ†˜ Emergency Info</h3>
        <p>Store important medical contacts and emergency instructions.</p>
        <a href="../emergency.html" class="btn primary">Manage</a>
      </div>
    </section>
  </main>

  <script>
    // === Patient Dashboard Script ===
    document.addEventListener("DOMContentLoaded", () => {
      const patientNameEl = document.getElementById("patientName");
      const logoutBtn = document.getElementById("logoutBtn");

      // Retrieve stored data
      const name = localStorage.getItem("name");
      const role = localStorage.getItem("role");

      // ðŸ”’ Verify role
      if (role !== "patient") {
        alert("Access denied! Only patients can view this page.");
        window.location.href = "../login.html";
        return;
      }

      // Display patient name
      patientNameEl.textContent = name
        ? `Welcome, ${name} ðŸ‘‹`
        : "Welcome, Patient ðŸ‘‹";

      // ðŸ”’ Logout button
      logoutBtn.addEventListener("click", () => {
        localStorage.clear();
        window.location.href = "../login.html";
      });
    });
  </script>
</body>
</html>
